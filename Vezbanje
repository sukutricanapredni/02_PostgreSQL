CREATE TABLE GRAD(
	POS_BROJ INTEGER PRIMARY KEY NOT NULL,
	NAZIV VARCHAR(15) NOT NULL,
);

INSERT INTO GRAD VALUES (11000,'Beograd');
INSERT INTO GRAD VALUES (15000,'Sabac');
INSERT INTO GRAD VALUES (21000,'Novi Sad');

CREATE TABLE KAFIC(
	ID_LOKAL INTEGER NOT NULL,
	ADRESA VARCHAR(40) NOT NULL,
	POS_BROJ INTEGER NOT NULL,
	PRIMARY KEY(ID_LOKAL),
	FOREIGN KEY(POS_BROJ) REFERENCES GRAD(POS_BROJ)
);

INSERT INTO KAFIC VALUES (1,'Marsala Birjuzova 28',11000);
INSERT INTO KAFIC VALUES (2,'Glavna 8',11000);
INSERT INTO KAFIC VALUES (3,'Glavna 10',15000);
INSERT INTO KAFIC VALUES (4,'Mocartova 15',15000);
INSERT INTO KAFIC VALUES (5,'Brace Ribnikar 2',21000);
INSERT INTO KAFIC VALUES (6,'Stefana Stefanovic 2a',21000);

/*
1.Zadatak
Prikazati adresu kafica broj 5

2.Zadatak
Prikazati Grad u kom se nalazi kafic broj 5

3.Zadatak
Prikazati id kafica,naziv grada i adresu za kafic broj 2

4.Zadatak
Prikazati sve kafice sortirane po id opadajuce

*/
SELECT ADRESA
FROM KAFIC
WHERE ID_LOKAL=5

SELECT GR.NAZIV
FROM KAFIC KA,GRAD GR
WHERE KA.ID_LOKAL=5 AND KA.POS_BROJ=GR.POS_BROJ


SELECT KA.ID_LOKAL,GR.NAZIV,KA.ADRESA
FROM KAFIC KA,GRAD GR
WHERE KA.ID_LOKAL=2 AND KA.POS_BROJ=GR.POS_BROJ

SELECT *
FROM KAFIC
ORDER BY ID_LOKAL DESC

*************************************************************************************

CREATE TABLE GRAD(
POSTANSKI_BROJ INTEGER PRIMARY KEY NOT NULL,
NAZIV VARCHAR(15) NOT NULL,
BR_STANOVNIKA INTEGER NOT NULL
);

INSERT INTO GRAD VALUES(11000,'Beograd',2000000);
INSERT INTO GRAD VALUES (21000,'Novi Sad',500000);
INSERT INTO GRAD VALUES (15000,'Sabac',55000);

SELECT * FROM GRAD

CREATE TABLE ZGRADA(
	BR_ZGRADA INTEGER NOT NULL,
	ADRESA VARCHAR(40) NOT NULL,
	POSTANSKI_BROJ INTEGER NOT NULL,
	PRIMARY KEY(BR_ZGRADA),
	FOREIGN KEY (POSTANSKI_BROJ) REFERENCES GRAD(POSTANSKI_BROJ)
);

DROP TABLE ZGRADA

INSERT INTO ZGRADA VALUES(1,'Nikole Pasica 28',11000);
INSERT INTO ZGRADA VALUES(2,'Nade Dimic 4',11000);
INSERT INTO ZGRADA VALUES(3,'Safarikova 21',21000);
INSERT INTO ZGRADA VALUES(4,'Mihaila Pupina bb',21000);
INSERT INTO ZGRADA VALUES(5,'Stefana Prvovenacnog 1',15000);
INSERT INTO ZGRADA VALUES(6,'Zike Popovica 69',15000);
INSERT INTO ZGRADA VALUES(7,'Vojislava Ilica 15',15000);

SELECT * FROM ZGRADA

CREATE TABLE STAN(
	BR_STANA INTEGER NOT NULL,
	BR_ZGRADA INTEGER NOT NULL,
	CENA INTEGER NOT NULL,
	KVADRATURA INTEGER NOT NULL,
	PRIMARY KEY(BR_STANA),
	FOREIGN KEY (BR_ZGRADA) REFERENCES ZGRADA(BR_ZGRADA)
);

INSERT INTO STAN VALUES(1,1,100000,50);
INSERT INTO STAN VALUES(2,1,90000,40);
INSERT INTO STAN VALUES(3,2,100000,80);
INSERT INTO STAN VALUES(4,3,50000,40);
INSERT INTO STAN VALUES(5,4,20000,35);
INSERT INTO STAN VALUES(6,5,100000,100);
INSERT INTO STAN VALUES(7,6,50000,60);
INSERT INTO STAN VALUES(8,7,20000,30);
INSERT INTO STAN VALUES(9,3,100000,120);
INSERT INTO STAN VALUES(10,5,100000,50);

SELECT * FROM STAN

/*
1.Zadatak
Prikazati postanski broj za Beograd

2.Zadatak
Prikazati sve brojeve zgrada koje su na postanskom broju 15000

3.Zadatak
Prikazati Kvadraturu za stanove koji se nalaze u zgradi 5

4.Zadatak
Prikazati sve informacije o stanovima koji se nalaze u zgradam 6 i 7

5.Zadatak
Prikazati cenu po kvadratu (cena/kvadrat) za sve stanove iz zgrade 1
*/

SELECT POSTANSKI_BROJ
FROM GRAD
WHERE NAZIV='Beograd'

SELECT BR_ZGRADA
FROM ZGRADA
WHERE POSTANSKI_BROJ=15000

SELECT KVADRATURA
FROM STAN
WHERE BR_ZGRADA=5

SELECT * 
FROM STAN 
WHERE BR_ZGRADA=6 OR BR_ZGRADA=7

SELECT CENA/KVADRATURA AS "CENA PO KVADRATU"
FROM STAN
WHERE BR_ZGRADA=1

SELECT Z.BR_ZGRADA,Z.ADRESA,GR.NAZIV
FROM ZGRADA Z,GRAD GR
WHERE Z.POSTANSKI_BROJ=GR.POSTANSKI_BROJ
/*
1.Zadatak
Prikazati postanski broj, naziv grada i adresu u tom gradu za sve zgrade
*/
SELECT  GR.POSTANSKI_BROJ, GR.NAZIV AS GRAD, Z.ADRESA
FROM GRAD GR,ZGRADA Z
WHERE GR.POSTANSKI_BROJ=Z.POSTANSKI_BROJ

/*
2.Zadatak
Prikazati broj stana,Postanski broj,adresu i cenu za svaki stan 
*/

SELECT S.BR_STANA,Z.POSTANSKI_BROJ,Z.ADRESA,S.CENA
FROM STAN S,ZGRADA Z
WHERE S.BR_ZGRADA=Z.BR_ZGRADA

/*
3.Zadatak
Prikazati broj stana,Naziv grada,adresu i cenu za svaki stan
*/


SELECT S.BR_STANA,GR.NAZIV,Z.ADRESA,S.CENA
FROM STAN S,ZGRADA Z,GRAD GR
WHERE S.BR_ZGRADA=Z.BR_ZGRADA AND GR.POSTANSKI_BROJ=Z.POSTANSKI_BROJ

SELECT MAX(CENA)
FROM STAN

/*
4.Zadatak
Prikazati naziv grad i njegov postanski broj u kom se nalazi najjeftiniji stan
*/

SELECT GR.NAZIV AS GRAD, GR.POSTANSKI_BROJ 
FROM GRAD GR, ZGRADA Z,STAN S
WHERE S.BR_ZGRADA=Z.BR_ZGRADA AND GR.POSTANSKI_BROJ=Z.POSTANSKI_BROJ AND S.CENA= (SELECT MIN(CENA) FROM STAN)







